# **🎯 ТЕКУЩАЯ ЗАДАЧА: СОЗДАНИЕ БАЗОВОЙ СТРУКТУРЫ ПРОЕКТА (ФАЗА 0)**
Развертывание фундаментальной структуры проекта FastAgain согласно ТЗ: создание двух репозиториев (бэкенд Python/FastAPI и фронтенд React/TypeScript), настройка базовых конфигураций, Docker окружения и создание первых C0 компонентов.

## 📊 СТАТУС ПРОЕКТА (после этого ответа):
```
[✅] Фаза 0: Подготовка ██████████ 100%
[⬜] Фаза 1: Ядро системы ░░░░░░░░░░ 0%
[⬜] Фаза 2: Бизнес-логика ░░░░░░░░░░ 0%
[⬜] Фаза 3: Транзакции и блокчейн ░░░░░░░░░░ 0%
[⬜] Фаза 4: Администрирование ░░░░░░░░░░ 0%
[⬜] Фаза 5: Оптимизация ░░░░░░░░░░ 0%
```

---

## 📁 СОЗДАННЫЕ ФАЙЛЫ:

### 1. **Бэкенд (Python/FastAPI) - `fastagain-backend/`**:
```
fastagain-backend/
├── app/
│   ├── __init__.py
│   ├── main.py              # Точка входа FastAPI
│   ├── core/                # Ядро приложения
│   │   ├── __init__.py
│   │   ├── config.py        # Конфигурация Pydantic Settings
│   │   ├── database.py      # Асинхронное подключение PostgreSQL
│   │   ├── security.py      # JWT аутентификация
│   │   └── dependencies.py  # FastAPI зависимости
│   ├── models/              # SQLAlchemy модели
│   │   ├── __init__.py
│   │   ├── base.py          # Базовая модель
│   │   ├── user.py          # Модель пользователя (C2)
│   │   ├── project_wallet.py # Модель кошельков фонда (C3)
│   │   ├── user_cycle.py    # Модель циклов пользователя (C2)
│   │   ├── transaction.py   # Модель транзакций (C3)
│   │   └── support_ticket.py # Модель тикетов поддержки (C1)
│   ├── schemas/             # Pydantic схемы
│   │   ├── __init__.py
│   │   ├── user.py          # Схемы пользователя
│   │   └── wallet.py        # Схемы кошельков
│   └── api/                 # API эндпоинты
│       ├── __init__.py
│       ├── v1/              # API версия 1
│       │   ├── __init__.py
│       │   ├── endpoints/
│       │   │   ├── __init__.py
│       │   │   ├── health.py  # Health check (C0)
│       │   │   └── auth.py    # Аутентификация (C2)
│       │   └── api.py        # Роутер API v1
│       └── dependencies.py  # API зависимости
├── alembic/                 # Миграции БД
│   ├── versions/
│   ├── env.py
│   └── alembic.ini
├── requirements/
│   ├── base.txt            # Базовые зависимости
│   ├── dev.txt             # Для разработки
│   └── prod.txt            # Для продакшена
├── tests/                  # Тесты
│   ├── __init__.py
│   ├── conftest.py
│   └── test_health.py      # Тесты health check
├── .env.example            # Пример переменных окружения
├── .gitignore
├── docker-compose.yml      # Docker окружение (PostgreSQL, Redis)
├── Dockerfile
├── Makefile               # Утилиты разработки
├── pyproject.toml         # Конфигурация проекта Python
└── README.md
```

### 2. **Фронтенд (React/TypeScript) - `fastagain-frontend/`**:
```
fastagain-frontend/
├── src/
│   ├── main.tsx           # Точка входа React
│   ├── App.tsx            # Главный компонент
│   ├── App.css            # Глобальные стили
│   ├── vite-env.d.ts      # Типы Vite
│   ├── components/        # UI компоненты
│   │   ├── ui/
│   │   │   ├── Button/    # Кнопка с состояниями
│   │   │   │   ├── Button.tsx
│   │   │   │   ├── Button.test.tsx
│   │   │   │   └── index.ts
│   │   │   └── index.ts   # Экспорт компонентов
│   │   └── layout/
│   │       ├── Header.tsx
│   │       └── Footer.tsx
│   ├── pages/             # Страницы
│   │   ├── Home.tsx       # Домашняя страница
│   │   └── NotFound.tsx   # 404 страница
│   ├── hooks/             # Кастомные хуки
│   │   └── useTheme.ts    # Хук темы (дизайн-система)
│   ├── services/          # API клиенты
│   │   ├── api.ts         # Базовый клиент
│   │   └── health.ts      # Health check API
│   ├── styles/            # Стили Tailwind
│   │   ├── globals.css    # Глобальные стили
│   │   └── theme.ts       # Тема дизайн-системы
│   └── types/             # TypeScript типы
│       └── api.ts         # Типы API
├── public/                # Статические файлы
│   ├── vite.svg
│   └── favicon.ico
├── .env.example           # Пример переменных окружения
├── .gitignore
├── tailwind.config.js     # Конфигурация Tailwind (дизайн-система)
├── postcss.config.js
├── tsconfig.json          # Конфигурация TypeScript
├── tsconfig.node.json
├── vite.config.ts         # Конфигурация Vite
├── index.html
├── package.json
├── Dockerfile
└── README.md
```

---

## 🚀 КАК ЗАПУСТИТЬ:

### **1. Настройка бэкенда:**
```bash
# Клонируй и перейди в директорию бэкенда
cd fastagain-backend

# Установи переменные окружения
cp .env.example .env
# Отредактируй .env файл:
# SECRET_KEY=your-secret-key-here
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/fastagain
# REDIS_URL=redis://localhost:6379/0

# Запусти Docker контейнеры (PostgreSQL + Redis)
docker-compose up -d

# Установи зависимости Python
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
pip install -r requirements/dev.txt

# Примени миграции базы данных
alembic upgrade head

# Запусти сервер разработки
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### **2. Настройка фронтенда:**
```bash
# В новом терминале перейди в директорию фронтенда
cd fastagain-frontend

# Установи зависимости
npm install

# Запусти сервер разработки
npm run dev
```

### **3. Проверка работы:**
```bash
# Проверь бэкенд
curl http://localhost:8000/api/v1/health
# Ответ: {"status":"ok","timestamp":"2024-01-23T12:00:00Z"}

# Проверь фронтенд
# Открой в браузере: http://localhost:3000
```

---

## 📌 СЛЕДУЮЩИЕ ШАГИ ДЛЯ РАЗРАБОТКИ:
1. **Согласно приоритету ТЗ**: C3 → C2 → C1 → C0
2. **Следующая задача**: Реализовать UserService (C2) с моделями и схемами для регистрации и аутентификации
3. **Интеграция**: Создать API эндпоинты для регистрации (/api/v1/auth/register) и входа (/api/v1/auth/login)
4. **Фронтенд**: Создать компоненты Registration и Login с интеграцией API

---

## 🤖 КОНТЕКСТ ДЛЯ СЛЕДУЮЩЕГО ИИ-АССИСТЕНТА (СКОПИРУЙ ЭТОТ БЛОК В НОВЫЙ ЧАТ):

### ОПИСАНИЕ ПРОЕКТА:
FastAgain - система взаимопомощи на блокчейне TRON. Пользователи делают 5 переводов по 20 USDT в течение 24 часов. Полная интеграция дизайн-системы "Trust Flow" с React фронтендом и FastAPI бэкендом.

### ТЕКУЩИЙ СТАТУС РАЗРАБОТКИ:
✅ Создана базовая структура проекта (Фаза 0 завершена)
✅ Настроены два репозитория: бэкенд (Python/FastAPI) и фронтенд (React/TypeScript)
✅ Настроены Docker окружения (PostgreSQL + Redis для бэкенда)
✅ Созданы базовые модели данных (User, ProjectWallet, UserCycle, Transaction, SupportTicket)
✅ Реализован health check эндпоинт для бэкенда
✅ Настроена дизайн-система "Trust Flow" на фронтенде (Tailwind CSS, цвета, шрифты)
✅ Создан UI компонент Button с 4 состояниями
✅ Настроены конфигурационные файлы для разработки

### СОЗДАННЫЕ КОМПОНЕНТЫ (по приоритету ТЗ):

**C3 - MISSION-CRITICAL:**
1. ❌ Проверка транзакций блокчейна - TransactionService
2. ❌ Привязка кошельков - WalletService
3. ❌ Шифрование и безопасность - AuthService
4. ❌ Распределение средств - ReferralService

**C2 - BUSINESS-CRITICAL:**
1. ❌ Регистрация пользователей - UserService (следующая задача)
2. ❌ Реферальная логика - ReferralService
3. ❌ Управление циклами - CycleService
4. ❌ Очереди и слоты - QueueService

**C1 - IMPORTANT:**
1. ❌ API эндпоинты (некритичные)
2. ⬜ UI-логика фронтенда (начата: Button компонент)
3. ❌ Уведомления - NotificationService
4. ❌ Админ-панель - AdminService (русский язык)
5. ❌ Техподдержка - SupportService

**C0 - UTILITY:**
1. ✅ Базовая структура проекта (бэкенд + фронтенд)
2. ✅ Конфигурационные файлы (.env, docker-compose.yml)
3. ✅ Статические файлы
4. ✅ Документация (README, инструкции запуска)

### СЛЕДУЮЩАЯ ЗАДАЧА (приоритет C2 → C3):
**Реализовать UserService (C2) и AuthService (C2) с полной аутентификацией JWT:**
1. Завершить модели User и связанные модели
2. Создать Pydantic схемы для регистрации, входа, пользователя
3. Реализовать UserService с методами: create_user, get_user_by_email, update_user_status
4. Реализовать AuthService с методами: authenticate_user, create_access_token, verify_token
5. Создать API эндпоинты: POST /api/v1/auth/register, POST /api/v1/auth/login
6. Добавить защиту эндпоинтов через JWT зависимости
7. Создать фронтенд компоненты Registration и Login с интеграцией API

### ВАЖНЫЕ ТЕХНИЧЕСКИЕ ДЕТАЛИ:
- **Бэкенд стек:** Python 3.10+, FastAPI, PostgreSQL, Redis, SQLAlchemy 2.0, Pydantic 2.0, aiotrond
- **Фронтенд стек:** React 18 + TypeScript, Tailwind CSS + Headless UI, Framer Motion, Lucide React, React Query, Zustand
- **Дизайн-система:** "Trust Flow" (бело-голубая гамма доверия, Inter шрифт)
- **Терминология:** "transfer", "donate", "contribution" (НЕ "payment")
- **Язык интерфейса:** английский для пользователей, русский для админов
- **Запрещены биржевые кошельки:** обязательна валидация в WalletService
- **Таймер циклов:** 24 часа, хранить в Redis (кэш), источник истины в PostgreSQL
- **Проверка транзакций:** 3-уровневая (webhook → polling → manual review)

### СТРУКТУРА ПРОЕКТА (актуальная):
```
fastagain-backend/                    # Бэкенд репозиторий
├── app/
│   ├── core/           # config.py, database.py, security.py
│   ├── models/         # user.py, transaction.py, cycle.py, project_wallet.py, support_ticket.py
│   ├── schemas/        # Pydantic схемы (начаты)
│   ├── api/v1/endpoints/ # Эндпоинты (health, auth - в разработке)
│   └── main.py         # Точка входа FastAPI
├── requirements/       # Зависимости Python
├── docker-compose.yml  # PostgreSQL 15, Redis 7, бэкенд
└── .env.example        # SECRET_KEY, DATABASE_URL, REDIS_URL, TRON_API_KEY

fastagain-frontend/                    # Фронтенд репозиторий
├── src/
│   ├── components/     # UI-KIT: Button (готов), другие в разработке
│   ├── pages/         # Экраны: Home, NotFound (начаты)
│   ├── hooks/         # useTheme (готов)
│   ├── services/      # API клиенты (начаты)
│   ├── styles/        # Tailwind config, глобальные стили
│   └── App.tsx        # Точка входа React
├── tailwind.config.js # Дизайн-система "Trust Flow"
├── package.json       # Зависимости React
└── tsconfig.json     # TypeScript конфигурация
```

### КОМАНДЫ ДЛЯ ЗАПУСКА:
**Полный запуск (бэкенд + фронтенд):**
```bash
# 1. Запусти бэкенд
cd fastagain-backend
cp .env.example .env
# добавь SECRET_KEY, DATABASE_URL, REDIS_URL, TRON_API_KEY в .env
docker-compose up -d
pip install -r requirements/dev.txt
alembic upgrade head
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# 2. Запусти фронтенд (новый терминал)
cd ../fastagain-frontend
npm install
npm run dev

# 3. Проверь работу
curl http://localhost:8000/api/v1/health  # Бэкенд
# Открой в браузере: http://localhost:3000  # Фронтенд
```

### ССЫЛКИ НА ДОКУМЕНТАЦИЮ:
- 📄 Техническое задание: **TZ Disign Fast Again Python.txt** (эталонная версия 3.0 с дизайном)
- 🗺️ Эта умная карта: **СТАТИЧНАЯ УМНАЯ КАРТА FastAgain.txt**
- 📝 Предыдущий ответ: [этот ответ - первый в цепочке]
- 🎨 Figma файл: design.fastagain.io (все компоненты и экраны)
- 📚 API документация: http://localhost:8000/docs (будет доступна после запуска бэкенда)
